<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>JMeter与BeanShell的化学反应 | Yuanjie-跑步爱好者，IT从业者。</title><meta name=keywords content="JMeter,性能测试"><meta name=description content="JMeter是什么
http://jmeter.apache.org/，性能测试工具。

基于Java的开源性能测试工具
支持测试的协议

Web - HTTP, HTTPS
SOAP / REST
FTP
Database
LDAP
Message-oriented middleware (MOM)
Mail
Native commands or shell scripts
TCP


支持多线程并发
完善的GUI界面，用于快速设计测试计划和调试测试脚本
完整测试结果，便于结果分析
JMeter不会执行HTML中的JavaScript脚本

BeanShell是什么
http://beanshell.org/

基于Java的免费解释器
松散类型的脚本语言
动态执行的Java代码
只有150K大小的JAR包


BeanShell既然可以编写Java代码，那么我们就可以在使用JMeter测试的过程中，使用Java语法功能，且支持关键字高亮，进行业务逻辑的处理，进而达到场景功能的设计。"><meta name=author content="Yuanjie"><link rel=canonical href=https://shiyuanjie.cn/posts/JMeter/JMeter%E4%B8%8EBeanshell%E7%9A%84%E5%8C%96%E5%AD%A6%E5%8F%8D%E5%BA%94/><link crossorigin=anonymous href=/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://shiyuanjie.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shiyuanjie.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shiyuanjie.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://shiyuanjie.cn/apple-touch-icon.png><link rel=mask-icon href=https://shiyuanjie.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://shiyuanjie.cn/posts/JMeter/JMeter%E4%B8%8EBeanshell%E7%9A%84%E5%8C%96%E5%AD%A6%E5%8F%8D%E5%BA%94/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta property="og:url" content="https://shiyuanjie.cn/posts/JMeter/JMeter%E4%B8%8EBeanshell%E7%9A%84%E5%8C%96%E5%AD%A6%E5%8F%8D%E5%BA%94/"><meta property="og:site_name" content="Yuanjie-跑步爱好者，IT从业者。"><meta property="og:title" content="JMeter与BeanShell的化学反应"><meta property="og:description" content="JMeter是什么 http://jmeter.apache.org/，性能测试工具。
基于Java的开源性能测试工具 支持测试的协议 Web - HTTP, HTTPS SOAP / REST FTP Database LDAP Message-oriented middleware (MOM) Mail Native commands or shell scripts TCP 支持多线程并发 完善的GUI界面，用于快速设计测试计划和调试测试脚本 完整测试结果，便于结果分析 JMeter不会执行HTML中的JavaScript脚本 BeanShell是什么 http://beanshell.org/
基于Java的免费解释器 松散类型的脚本语言 动态执行的Java代码 只有150K大小的JAR包 BeanShell既然可以编写Java代码，那么我们就可以在使用JMeter测试的过程中，使用Java语法功能，且支持关键字高亮，进行业务逻辑的处理，进而达到场景功能的设计。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-11-01T15:53:00+00:00"><meta property="article:modified_time" content="2016-11-01T15:53:00+00:00"><meta property="article:tag" content="JMeter"><meta property="article:tag" content="性能测试"><meta name=twitter:card content="summary"><meta name=twitter:title content="JMeter与BeanShell的化学反应"><meta name=twitter:description content="JMeter是什么
http://jmeter.apache.org/，性能测试工具。

基于Java的开源性能测试工具
支持测试的协议

Web - HTTP, HTTPS
SOAP / REST
FTP
Database
LDAP
Message-oriented middleware (MOM)
Mail
Native commands or shell scripts
TCP


支持多线程并发
完善的GUI界面，用于快速设计测试计划和调试测试脚本
完整测试结果，便于结果分析
JMeter不会执行HTML中的JavaScript脚本

BeanShell是什么
http://beanshell.org/

基于Java的免费解释器
松散类型的脚本语言
动态执行的Java代码
只有150K大小的JAR包


BeanShell既然可以编写Java代码，那么我们就可以在使用JMeter测试的过程中，使用Java语法功能，且支持关键字高亮，进行业务逻辑的处理，进而达到场景功能的设计。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://shiyuanjie.cn/posts/"},{"@type":"ListItem","position":2,"name":"JMeter与BeanShell的化学反应","item":"https://shiyuanjie.cn/posts/JMeter/JMeter%E4%B8%8EBeanshell%E7%9A%84%E5%8C%96%E5%AD%A6%E5%8F%8D%E5%BA%94/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"JMeter与BeanShell的化学反应","name":"JMeter与BeanShell的化学反应","description":"JMeter是什么 http://jmeter.apache.org/，性能测试工具。\n基于Java的开源性能测试工具 支持测试的协议 Web - HTTP, HTTPS SOAP / REST FTP Database LDAP Message-oriented middleware (MOM) Mail Native commands or shell scripts TCP 支持多线程并发 完善的GUI界面，用于快速设计测试计划和调试测试脚本 完整测试结果，便于结果分析 JMeter不会执行HTML中的JavaScript脚本 BeanShell是什么 http://beanshell.org/\n基于Java的免费解释器 松散类型的脚本语言 动态执行的Java代码 只有150K大小的JAR包 BeanShell既然可以编写Java代码，那么我们就可以在使用JMeter测试的过程中，使用Java语法功能，且支持关键字高亮，进行业务逻辑的处理，进而达到场景功能的设计。\n","keywords":["JMeter","性能测试"],"articleBody":"JMeter是什么 http://jmeter.apache.org/，性能测试工具。\n基于Java的开源性能测试工具 支持测试的协议 Web - HTTP, HTTPS SOAP / REST FTP Database LDAP Message-oriented middleware (MOM) Mail Native commands or shell scripts TCP 支持多线程并发 完善的GUI界面，用于快速设计测试计划和调试测试脚本 完整测试结果，便于结果分析 JMeter不会执行HTML中的JavaScript脚本 BeanShell是什么 http://beanshell.org/\n基于Java的免费解释器 松散类型的脚本语言 动态执行的Java代码 只有150K大小的JAR包 BeanShell既然可以编写Java代码，那么我们就可以在使用JMeter测试的过程中，使用Java语法功能，且支持关键字高亮，进行业务逻辑的处理，进而达到场景功能的设计。\nBeanShell与JMeter的化学反应 JMeter提供5种方式使用BeanShell BeanShell Sampler 直接使用BeanShell来编写样例。 BeanShell PreProcessor 在样例触发前，使用BeanShell进行加工处理。 BeanShell PostProcessor 在样例触发后，使用BeanShell进行加工处理。 BeanShell Assertion 使用BeanShell进行断言处理。 BeanShell Listener 使用BeanShell做监听器。 JMeter提供的BeanShell功能，遍布整个测试的各个阶段。只要你需要的时候，它都可以直接拿来用。\n变量处理 JMeter中已有变量名name，值为testBeanShell 配制BeanShell的Parameters，传入参数test。并编写变量内容输出代码，log不是Java内置的对象，但是JMeter的内置对象。 log.info(\"Test is \" + vars.get(\"test\")); 执行测试，便可查看出变量内容的输出 通过上面的BeanShell脚本，我们可以发现BeanShell可以直接获取JMeter的变量内容。下面我们针对变量内容进行加工，看下如何实现\n将test变量的值获取后，再随机在原变量值后追加随机数，并再次赋值给test变量 log.info(\"Init test: \" + vars.get(\"test\")); Random ran = new Random(); int x = ran.nextInt(6); vars.put(\"test\",vars.get(\"test\")+x); log.info(\"Random test: \" + vars.get(\"test\")); 执行测试，查看结果 使用自定义的JAR包 Java源文件 appendString类中有方法append: 将参数的内容追加-Append后，返回追加后的字符串\n1 2 3 4 5 6 package com.test; public class appendString { public String append(String sourceString){ return sourceString + \"-Append\"; } } 生成Jar包\n利用其它工具将此源文件打包成Jar文件\nJMeter中引用Jar包功能\n将Jar包复制至JMeter下方lib/ext下\n重新打开JMeter，进入BeanShell中，添加调试代码：输出加工后的内容\nimport com.test.appendString; log.info(new appendString().append(\"111\")); 查看JMeter的日志输出：加工后的字符为111-Append 通过上面的方法，我们可以看出，通过JMeter与BeanShell的结合，可以将外部的代码与JMeter结合，也可直接使用BeanShell来操作JMeter内部的数据处理。 下面我们再看下BeanShell提供了哪些内置的操作对象\nBeanShell的内置对象 对象名 存在元素 功能 log BeanShell Sampler BeanShell PreProcessor BeanShell PostProcessor BeanShell Assertion BeanShell Listener 日志信息输出 Label BeanShell Sampler 样例 FileName BeanShell Sampler 文件名 Parameters BeanShell Sampler 参数 bsh.args BeanShell Sampler BeanShell脚本 SampleResult BeanShell Sampler BeanShell Assertion BeanShell Listener 样例结果 ResponseCode BeanShell Sampler BeanShell Assertion 返回的状态码 ResponseMessage BeanShell Sampler BeanShell Assertion 返回信息 IsSucess BeanShell Sampler 是否成功 ctx BeanShell Sampler BeanShell PreProcessor BeanShell PostProcessor BeanShell Assertion BeanShell Listener JMeter的上下文 vars BeanShell Sampler,BeanShell PreProcessor BeanShell PostProcessor BeanShell Assertion BeanShell Listener 变量操作 props BeanShell Sampler BeanShell PreProcessor BeanShell PostProcessor BeanShell Assertion BeanShell Listener JMeter属性 prev BeanShell PreProcessor BeanShell PostProcessor BeanShell Listener 样例的前置结果读取 sampler BeanShell PreProcessor BeanShell PostProcessor 当前样例 Response BeanShell Assertion 返回的对象，读-写 Failure BeanShell Assertion 是否失败 FailureMessage BeanShell Assertion 失败信息 ResponseData BeanShell Assertion 返回数据体，字节形式 ResponseHeader BeanShell Assertion 返回信息头 RequestHeader BeanShell Assertion 请求信息头 SampleLabel BeanShell Assertion 样例名称 SampleData BeanShell Assertion 发送至服务器的数据 SampleEvent BeanShell Listener 读取当前样例的事件 有了上面的操作对象，可以在测试过程中，对测试的内容，进行更加详细的加工。 完善的对象使用方法，可查阅JMeter官方API文档\n后期应用扩展 将请求的数据进行个性化加工 将获取的数据进行扩展保存 完善业务场景 参考 http://jmeter.apache.org/ https://jmeter.apache.org/api/ http://beanshell.org/ ","wordCount":"1502","inLanguage":"en","datePublished":"2016-11-01T15:53:00Z","dateModified":"2016-11-01T15:53:00Z","author":{"@type":"Person","name":"Yuanjie"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shiyuanjie.cn/posts/JMeter/JMeter%E4%B8%8EBeanshell%E7%9A%84%E5%8C%96%E5%AD%A6%E5%8F%8D%E5%BA%94/"},"publisher":{"@type":"Organization","name":"Yuanjie-跑步爱好者，IT从业者。","logo":{"@type":"ImageObject","url":"https://shiyuanjie.cn/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://shiyuanjie.cn/ accesskey=h title="Yuanjie-跑步爱好者，IT从业者。 (Alt + H)">Yuanjie-跑步爱好者，IT从业者。</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://shiyuanjie.cn/tools/ title=小工具><span>小工具</span></a></li><li><a href=https://shiyuanjie.cn/archives/ title=归档><span>归档</span></a></li><li><a href=https://shiyuanjie.cn/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://shiyuanjie.cn/>Home</a>&nbsp;»&nbsp;<a href=https://shiyuanjie.cn/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">JMeter与BeanShell的化学反应</h1><div class=post-meta><span title='2016-11-01 15:53:00 +0000 UTC'>November 1, 2016</span>&nbsp;·&nbsp;<span>3 min</span>&nbsp;·&nbsp;<span>Yuanjie</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#jmeter%e6%98%af%e4%bb%80%e4%b9%88 aria-label=JMeter是什么>JMeter是什么</a></li><li><a href=#beanshell%e6%98%af%e4%bb%80%e4%b9%88 aria-label=BeanShell是什么>BeanShell是什么</a></li><li><a href=#beanshell%e4%b8%8ejmeter%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94 aria-label=BeanShell与JMeter的化学反应>BeanShell与JMeter的化学反应</a><ul><li><a href=#jmeter%e6%8f%90%e4%be%9b5%e7%a7%8d%e6%96%b9%e5%bc%8f%e4%bd%bf%e7%94%a8beanshell aria-label=JMeter提供5种方式使用BeanShell>JMeter提供5种方式使用BeanShell</a></li><li><a href=#%e5%8f%98%e9%87%8f%e5%a4%84%e7%90%86 aria-label=变量处理>变量处理</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e8%87%aa%e5%ae%9a%e4%b9%89%e7%9a%84jar%e5%8c%85 aria-label=使用自定义的JAR包>使用自定义的JAR包</a></li><li><a href=#beanshell%e7%9a%84%e5%86%85%e7%bd%ae%e5%af%b9%e8%b1%a1 aria-label=BeanShell的内置对象>BeanShell的内置对象</a></li></ul></li><li><a href=#%e5%90%8e%e6%9c%9f%e5%ba%94%e7%94%a8%e6%89%a9%e5%b1%95 aria-label=后期应用扩展>后期应用扩展</a></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div><div class=post-content><h2 id=jmeter是什么>JMeter是什么<a hidden class=anchor aria-hidden=true href=#jmeter是什么>#</a></h2><p><a href=http://jmeter.apache.org/>http://jmeter.apache.org/</a>，性能测试工具。</p><ul><li>基于<code>Java</code>的<code>开源</code>性能测试工具</li><li>支持测试的协议<ul><li>Web - HTTP, HTTPS</li><li>SOAP / REST</li><li>FTP</li><li>Database</li><li>LDAP</li><li>Message-oriented middleware (MOM)</li><li>Mail</li><li>Native commands or shell scripts</li><li>TCP</li></ul></li><li>支持多线程并发</li><li>完善的GUI界面，用于快速设计测试计划和调试测试脚本</li><li>完整测试结果，便于结果分析</li><li>JMeter不会执行HTML中的JavaScript脚本</li></ul><h2 id=beanshell是什么>BeanShell是什么<a hidden class=anchor aria-hidden=true href=#beanshell是什么>#</a></h2><p><a href=http://beanshell.org/>http://beanshell.org/</a></p><ul><li>基于<code>Java</code>的免费解释器</li><li>松散类型的脚本语言</li><li>动态执行的Java代码</li><li>只有150K大小的JAR包</li></ul><blockquote><p>BeanShell既然可以编写Java代码，那么我们就可以在使用JMeter测试的过程中，使用Java语法功能，且支持关键字<code>高亮</code>，进行业务逻辑的处理，进而达到<code>场景</code>功能的设计。</p></blockquote><h2 id=beanshell与jmeter的化学反应>BeanShell与JMeter的化学反应<a hidden class=anchor aria-hidden=true href=#beanshell与jmeter的化学反应>#</a></h2><h3 id=jmeter提供5种方式使用beanshell>JMeter提供<code>5</code>种方式使用BeanShell<a hidden class=anchor aria-hidden=true href=#jmeter提供5种方式使用beanshell>#</a></h3><ul><li>BeanShell Sampler
直接使用BeanShell来编写<code>样例</code>。</li><li>BeanShell PreProcessor
在<code>样例</code>触发前，使用BeanShell进行加工处理。</li><li>BeanShell PostProcessor
在<code>样例</code>触发后，使用BeanShell进行加工处理。</li><li>BeanShell Assertion
使用BeanShell进行<code>断言</code>处理。</li><li>BeanShell Listener
使用BeanShell做<code>监听器</code>。</li></ul><blockquote><p>JMeter提供的BeanShell功能，遍布整个测试的<code>各个阶段</code>。只要你需要的时候，它都可以直接<code>拿</code>来用。</p></blockquote><h3 id=变量处理>变量处理<a hidden class=anchor aria-hidden=true href=#变量处理>#</a></h3><ul><li>JMeter中已有变量名<code>name</code>，值为<code>testBeanShell</code>
<img alt=变量 loading=lazy src=/img/JMeter-BeanShell/Variable.png></li><li>配制BeanShell的<code>Parameters</code>，传入参数<code>test</code>。并<code>编写</code>变量内容输出代码，log不是Java内置的对象，但是JMeter的内置对象。</li></ul><pre tabindex=0><code>log.info(&#34;Test is &#34; + vars.get(&#34;test&#34;));
</code></pre><p><img alt=输出变量内容 loading=lazy src=/img/JMeter-BeanShell/GetVariable.png></p><ul><li>执行测试，便可查看出变量内容的输出
<img alt=变量内容的输出 loading=lazy src=/img/JMeter-BeanShell/LogVariable.png></li></ul><blockquote><p>通过上面的BeanShell脚本，我们可以发现BeanShell可以直接获取JMeter的变量内容。下面我们针对变量内容进行加工，看下如何实现</p></blockquote><ul><li>将<code>test</code>变量的值获取后，再随机在原变量值后<code>追加</code>随机数，并再次赋值给<code>test</code>变量</li></ul><pre tabindex=0><code>log.info(&#34;Init test: &#34; + vars.get(&#34;test&#34;));
Random ran = new Random();
int x = ran.nextInt(6);
vars.put(&#34;test&#34;,vars.get(&#34;test&#34;)+x);
log.info(&#34;Random test: &#34; + vars.get(&#34;test&#34;));
</code></pre><ul><li>执行测试，查看结果
<img alt=加工后的变量结果 loading=lazy src=/img/JMeter-BeanShell/RefactorVariable.png></li></ul><h3 id=使用自定义的jar包>使用自定义的JAR包<a hidden class=anchor aria-hidden=true href=#使用自定义的jar包>#</a></h3><ul><li><code>Java</code>源文件<blockquote><p><code>appendString</code>类中有方法<code>append</code>: 将参数的内容追加<code>-Append</code>后，返回<code>追加后</code>的字符串</p></blockquote></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nn>com.test</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>appendString</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>append</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>sourceString</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>sourceString</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;-Append&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><p>生成Jar包</p><blockquote><p>利用其它工具将此源文件打包成<code>Jar</code>文件</p></blockquote></li><li><p>JMeter中<code>引用</code>Jar包功能</p><blockquote><p>将<code>Jar</code>包<code>复制</code>至JMeter下方<code>lib/ext</code>下</p></blockquote></li><li><p><code>重新打开</code>JMeter，进入<code>BeanShell</code>中，添加调试代码：输出<code>加工</code>后的内容</p></li></ul><pre tabindex=0><code>import com.test.appendString;
log.info(new appendString().append(&#34;111&#34;));
</code></pre><ul><li>查看JMeter的日志输出：加工后的字符为<code>111-Append</code>
<img alt=JarWithBeanShell loading=lazy src=/img/JMeter-BeanShell/JarWithBeanShell.png></li></ul><blockquote><p>通过上面的方法，我们可以看出，通过JMeter与BeanShell的结合，可以将外部的代码与JMeter结合，也可直接使用BeanShell来操作JMeter内部的数据处理。
下面我们再看下<code>BeanShell</code>提供了哪些内置的操作对象</p></blockquote><h3 id=beanshell的内置对象>BeanShell的内置对象<a hidden class=anchor aria-hidden=true href=#beanshell的内置对象>#</a></h3><table><thead><tr><th style=text-align:left>对象名</th><th style=text-align:left>存在元素</th><th style=text-align:left>功能</th></tr></thead><tbody><tr><td style=text-align:left>log</td><td style=text-align:left>BeanShell Sampler<br>BeanShell PreProcessor<br>BeanShell PostProcessor<br>BeanShell Assertion<br>BeanShell Listener</td><td style=text-align:left>日志信息输出</td></tr><tr><td style=text-align:left>Label</td><td style=text-align:left>BeanShell Sampler</td><td style=text-align:left>样例</td></tr><tr><td style=text-align:left>FileName</td><td style=text-align:left>BeanShell Sampler</td><td style=text-align:left>文件名</td></tr><tr><td style=text-align:left>Parameters</td><td style=text-align:left>BeanShell Sampler</td><td style=text-align:left>参数</td></tr><tr><td style=text-align:left>bsh.args</td><td style=text-align:left>BeanShell Sampler</td><td style=text-align:left>BeanShell脚本</td></tr><tr><td style=text-align:left>SampleResult</td><td style=text-align:left>BeanShell Sampler<br>BeanShell Assertion<br>BeanShell Listener</td><td style=text-align:left>样例结果</td></tr><tr><td style=text-align:left>ResponseCode</td><td style=text-align:left>BeanShell Sampler<br>BeanShell Assertion</td><td style=text-align:left>返回的状态码</td></tr><tr><td style=text-align:left>ResponseMessage</td><td style=text-align:left>BeanShell Sampler<br>BeanShell Assertion</td><td style=text-align:left>返回信息</td></tr><tr><td style=text-align:left>IsSucess</td><td style=text-align:left>BeanShell Sampler</td><td style=text-align:left>是否成功</td></tr><tr><td style=text-align:left>ctx</td><td style=text-align:left>BeanShell Sampler<br>BeanShell PreProcessor<br>BeanShell PostProcessor<br>BeanShell Assertion<br>BeanShell Listener</td><td style=text-align:left>JMeter的上下文</td></tr><tr><td style=text-align:left>vars</td><td style=text-align:left>BeanShell Sampler,BeanShell PreProcessor<br>BeanShell PostProcessor<br>BeanShell Assertion<br>BeanShell Listener</td><td style=text-align:left>变量操作</td></tr><tr><td style=text-align:left>props</td><td style=text-align:left>BeanShell Sampler<br>BeanShell PreProcessor<br>BeanShell PostProcessor<br>BeanShell Assertion<br>BeanShell Listener</td><td style=text-align:left>JMeter属性</td></tr><tr><td style=text-align:left>prev</td><td style=text-align:left>BeanShell PreProcessor<br>BeanShell PostProcessor<br>BeanShell Listener</td><td style=text-align:left>样例的<code>前置</code>结果<code>读取</code></td></tr><tr><td style=text-align:left>sampler</td><td style=text-align:left>BeanShell PreProcessor<br>BeanShell PostProcessor</td><td style=text-align:left>当前样例</td></tr><tr><td style=text-align:left>Response</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>返回的对象，读-写</td></tr><tr><td style=text-align:left>Failure</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>是否失败</td></tr><tr><td style=text-align:left>FailureMessage</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>失败信息</td></tr><tr><td style=text-align:left>ResponseData</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>返回数据体，字节形式</td></tr><tr><td style=text-align:left>ResponseHeader</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>返回信息头</td></tr><tr><td style=text-align:left>RequestHeader</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>请求信息头</td></tr><tr><td style=text-align:left>SampleLabel</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>样例名称</td></tr><tr><td style=text-align:left>SampleData</td><td style=text-align:left>BeanShell Assertion</td><td style=text-align:left>发送至服务器的数据</td></tr><tr><td style=text-align:left>SampleEvent</td><td style=text-align:left>BeanShell Listener</td><td style=text-align:left>读取当前样例的事件</td></tr></tbody></table><blockquote><p>有了上面的操作对象，可以在测试过程中，对测试的内容，进行更加详细的<code>加工</code>。
完善的对象使用方法，可查阅<a href=https://jmeter.apache.org/api/>JMeter官方API文档</a></p></blockquote><h2 id=后期应用扩展>后期应用扩展<a hidden class=anchor aria-hidden=true href=#后期应用扩展>#</a></h2><ul><li>将请求的数据进行<code>个性化</code>加工</li><li>将获取的数据进行扩展<code>保存</code></li><li><code>完善</code>业务场景</li></ul><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><ul><li><a href=http://jmeter.apache.org/>http://jmeter.apache.org/</a></li><li><a href=https://jmeter.apache.org/api/>https://jmeter.apache.org/api/</a></li><li><a href=http://beanshell.org/>http://beanshell.org/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://shiyuanjie.cn/tags/JMeter/>JMeter</a></li><li><a href=https://shiyuanjie.cn/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/>性能测试</a></li></ul><nav class=paginav><a class=prev href=https://shiyuanjie.cn/posts/Book/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6/><span class=title>« Prev</span><br><span>如何阅读一本书</span>
</a><a class=next href=https://shiyuanjie.cn/posts/Book/Node.js%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/><span class=title>Next »</span><br><span>Node.js开发指南</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share JMeter与BeanShell的化学反应 on x" href="https://x.com/intent/tweet/?text=JMeter%e4%b8%8eBeanShell%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94&amp;url=https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f&amp;hashtags=JMeter%2c%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JMeter与BeanShell的化学反应 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f&amp;title=JMeter%e4%b8%8eBeanShell%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94&amp;summary=JMeter%e4%b8%8eBeanShell%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94&amp;source=https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JMeter与BeanShell的化学反应 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f&title=JMeter%e4%b8%8eBeanShell%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JMeter与BeanShell的化学反应 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JMeter与BeanShell的化学反应 on whatsapp" href="https://api.whatsapp.com/send?text=JMeter%e4%b8%8eBeanShell%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94%20-%20https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JMeter与BeanShell的化学反应 on telegram" href="https://telegram.me/share/url?text=JMeter%e4%b8%8eBeanShell%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94&amp;url=https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JMeter与BeanShell的化学反应 on ycombinator" href="https://news.ycombinator.com/submitlink?t=JMeter%e4%b8%8eBeanShell%e7%9a%84%e5%8c%96%e5%ad%a6%e5%8f%8d%e5%ba%94&u=https%3a%2f%2fshiyuanjie.cn%2fposts%2fJMeter%2fJMeter%25E4%25B8%258EBeanshell%25E7%259A%2584%25E5%258C%2596%25E5%25AD%25A6%25E5%258F%258D%25E5%25BA%2594%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main></body></html>